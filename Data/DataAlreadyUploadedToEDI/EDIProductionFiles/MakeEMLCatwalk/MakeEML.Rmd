---
title: "Make EML"
author: "Abby Lewis"
date: "12/16/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
# Install devtools
#install.packages("devtools")

# Load devtools
library(pacman)
pacman::p_load(devtools,tidyverse,lubridate)

# Install and load EMLassemblyline
install_github("EDIorg/EMLassemblyline")
library(EMLassemblyline)
cat <- read.csv("./catdata_edited_withDO.csv")

# Import templates for an example dataset licensed under CC0, with 2 tables located in at "path"
#import_templates(path = "C:/Users/wwoel/Desktop/Reservoirs/Data/DataAlreadyUploadedToEDI/EDIProductionFiles/MakeEMLCatwalk",
#                license = "CCBY",
#                 data.files = "Catwalk_cleanedEDI")

view_unit_dictionary()
define_catvars(getwd())

template_core_metadata(
      path = getwd(),
      license = "CCBY",
      file.type = '.txt',
      write.file = TRUE)

template_table_attributes(
      path = getwd(),
      data.path = getwd(),
      data.table = "CTD_final_2013_2019.csv",
      write.file = TRUE)

make_eml(path = getwd(),
         dataset.title = "Time series of high-frequency sensor data measuring water temperature, dissolved oxygen, conductivity, specific conductivity, total dissolved solids, chlorophyll a, phycocyanin, and fluorescent dissolved organic matter at discrete depths in Falling Creek Reservoir, Virginia, USA in 2018",
         data.files = "catdata_edited_withDO.csv",
         data.files.description = "Catwalk Sensor String",
         temporal.coverage = c("2018-07-05", "2019-12-16"),
         maintenance.description = "ongoing",
         user.id = c("ccarey"),
         package.id = "edi.271.3", #### this is the one that I need to change!!!
         affiliation = "EDI")
```

